/*
  Blink
  The basic Energia example.
  Turns on an LED on for one second, then off for one second, repeatedly.
  Change the LED define to blink other LEDs.
  
  Hardware Required:
  * LaunchPad with an LED
  
  This example code is in the public domain.
*/

// most launchpads have a red LED
#define LED1 P2_5
#define PWM P1_0
#define LED2 P1_6
#define LED3 P2_1
#define LED4 P2_3
#define LED5 P2_5
#define SLOW_BUTTON P1_7
#define SPEED_BUTTON P1_3
//#define LED2_BUTTON P1_3

//see pins_energia.h for more LED definitions
//#define LED GREEN_LED
int pwmVal = 0;
bool lastStateSpeedBtn = 0;
bool lastStateSlowBtn = 0;


bool lastStateLedOneBtn = 0;
bool lastStateLedTwoBtn = 0;

/* Check if LEDs are on or off*/
bool ledOne = 0;    // 0 = LED off, 1 = LED on
bool ledTwo = 0;

/*The next 2 functions turn the specified LED on or off when the button is pressed, depending on the state of the LED*/
// the setup routine runs once when you press reset:
// the setup routine runs once when you press reset:


/*The next 2 functions change the PWM speed by 11*/
void buttonSpeedUpPressed() 
{
	bool currentBtnState = digitalRead(SPEED_BUTTON);

	if( !lastStateSpeedBtn && currentBtnState)
	{
		pwmVal = pwmVal + 5;
		if ( pwmVal>= 1023) {    // if PWM is at max, no change
			pwmVal = 1023;
		} else {    // if PWM is not at max, write new value
			analogWrite(PWM, pwmVal);
}
	}
	lastStateSpeedBtn = currentBtnState;
	return;
}


//

void setup() 
{
    // initialize the digital pin as an output.
    pinMode(LED1, OUTPUT);
  pinMode(LED2, OUTPUT);
  pinMode(LED3, OUTPUT);
  pinMode(LED4, OUTPUT);
  pinMode(LED5, OUTPUT);
  pinMode(SPEED_BUTTON, INPUT);
  pinMode(SLOW_BUTTON, INPUT);
  pinMode(PWM, OUTPUT);
//   digitalWrite (LED1, 0);
  digitalWrite (LED2, 0);
  digitalWrite (LED3, 0);
  digitalWrite (LED4, 0);
  digitalWrite (LED5, 0);
  analogWrite (PWM, 0);
}

// the loop routine runs over and over again forever:
void loop()
 {

     buttonSpeedUpPressed(); 
 }


